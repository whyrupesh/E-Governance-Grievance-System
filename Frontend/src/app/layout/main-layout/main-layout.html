<mat-sidenav-container class="container">

  <!-- SIDEBAR -->
  <mat-sidenav mode="side" opened class="sidenav">

    <div class="brand-header">
      <mat-icon class="brand-logo">verified_user</mat-icon>
      <h3 class="app-title">CivicConnect</h3>
    </div>

    <!-- User Profile Section -->
    <div class="user-profile-section">
      <div class="user-avatar">
        ðŸ‘¤
      </div>
      <span class="user-name">{{ currentUser?.fullName|| 'User' }}</span>
      <span class="user-role">{{ getRoleDisplay() }}</span>
    </div>

    <mat-nav-list>



      <!-- Citizen -->
      @if (authService.hasRole('Citizen')) {
      <a mat-list-item routerLink="/grievances" routerLinkActive="active-link">
        <mat-icon matListItemIcon>dashboard</mat-icon>
        <span matListItemTitle>My Grievances</span>
      </a>
      <a mat-list-item routerLink="/grievances/new" routerLinkActive="active-link">
        <mat-icon matListItemIcon>add_circle_outline</mat-icon>
        <span matListItemTitle>Lodge Grievance</span>
      </a>
      }

      <!-- Officer -->
      @if (authService.hasRole('Officer')) {
      <a mat-list-item routerLink="/officer/assigned-grievances" routerLinkActive="active-link">
        <mat-icon matListItemIcon>assignment_ind</mat-icon>
        <span matListItemTitle>Officer Dashboard</span>
      </a>
      <a mat-list-item routerLink="/officer/analytics" routerLinkActive="active-link">
        <mat-icon matListItemIcon>assessment</mat-icon>
        <span matListItemTitle>Analytics</span>
      </a>
      }

      <!-- Supervisor -->
      @if (authService.hasRole('Supervisor')) {
      <a mat-list-item routerLink="/supervisor/all-grievances" routerLinkActive="active-link">
        <mat-icon matListItemIcon>supervisor_account</mat-icon>
        <span matListItemTitle>Supervisor Panel</span>
      </a>
      <a mat-list-item routerLink="/supervisor/analytics" routerLinkActive="active-link">
        <mat-icon matListItemIcon>assessment</mat-icon>
        <span matListItemTitle>Analytics</span>
      </a>
      }

      <!-- Admin -->
      @if (authService.hasRole('Admin')) {
      <a mat-list-item routerLink="/admin/departments" routerLinkActive="active-link">
        <mat-icon matListItemIcon>domain</mat-icon>
        <span matListItemTitle>Departments</span>
      </a>
      <a mat-list-item routerLink="/admin/categories" routerLinkActive="active-link">
        <mat-icon matListItemIcon>category</mat-icon>
        <span matListItemTitle>Categories</span>
      </a>
      <a mat-list-item routerLink="/admin/officers" routerLinkActive="active-link">
        <mat-icon matListItemIcon>badge</mat-icon>
        <span matListItemTitle>Officers</span>
      </a>
      <a mat-list-item routerLink="/admin/supervisors" routerLinkActive="active-link">
        <mat-icon matListItemIcon>manage_accounts</mat-icon>
        <span matListItemTitle>Supervisors</span>
      </a>
      <!-- <a mat-list-item routerLink="/admin/reports" routerLinkActive="active-link">
        <mat-icon matListItemIcon>assessment</mat-icon>
        <span matListItemTitle>Reports</span>
      </a> -->
      }
    </mat-nav-list>

    <!-- common -->
    <div style="margin-top: auto;">
      @if (getRoleDisplay() !== 'Admin') {
      <mat-divider></mat-divider>
      <mat-nav-list>
        <a mat-list-item routerLink="/notifications" routerLinkActive="active-link" class="notification-link">
          <mat-icon matListItemIcon>notifications</mat-icon>
          <span matListItemTitle>
            Notifications
            @if (notificationService.unreadCount() > 0) {
            <span class="unread-dot"></span>
            }
          </span>
        </a>
      </mat-nav-list>
      }
    </div>
  </mat-sidenav>

  <!-- MAIN CONTENT -->
  <mat-sidenav-content>

    <!-- TOP NAV -->
    <mat-toolbar class="main-toolbar">
      <span class="page-title">Grievance Redressal System</span>
      <span class="spacer"></span>

      <button mat-button class="logout-btn" (click)="logout()">
        <mat-icon>logout</mat-icon>
        Logout
      </button>
    </mat-toolbar>

    <!-- PAGE CONTENT -->
    <div class="content">
      <router-outlet></router-outlet>
    </div>

  </mat-sidenav-content>

</mat-sidenav-container>