<div class="notification-container animate-fade-in">

    <div class="page-header">
        <div class="header-left">
            <h2 class="page-title gradient-text">Notifications</h2>
            <p class="page-subtitle">Stay updated with your grievance status</p>
        </div>

        <div class="header-actions">
            @if(unreadCount() > 0) {
            <button mat-stroked-button color="primary" (click)="markAllAsRead()">
                <mat-icon>done_all</mat-icon>
                Mark all as read
            </button>
            }
        </div>
    </div>

    <div class="content-panel glass-panel">

        @if(loading()) {
        <div class="loading-state">
            <p>Loading notifications...</p>
        </div>
        } @else if (notifications().length === 0) {
        <div class="empty-state">
            <mat-icon>notifications_off</mat-icon>
            <p>You have no notifications yet.</p>
        </div>
        } @else {
        <mat-list class="notification-list">
            @for (n of notifications(); track n.id) {
            <mat-list-item class="notification-item" [class.unread]="!n.isRead" (click)="viewGrievance(n)">
                <mat-icon matListItemIcon [class.icon-unread]="!n.isRead">
                    {{ n.isRead ? 'notifications' : 'notifications_active' }}
                </mat-icon>

                <div matListItemTitle class="item-title">
                    {{ n.message }}
                </div>

                <div matListItemLine class="item-meta">
                    <span>{{ n.createdAt | date:'medium' }}</span>
                    @if(!n.isRead) {
                    <span class="badge-new">New</span>
                    }
                </div>

                <div matListItemMeta>
                    @if(!n.isRead) {
                    <button mat-icon-button (click)="$event.stopPropagation(); markAsRead(n)" matTooltip="Mark as read">
                        <mat-icon>check_circle_outline</mat-icon>
                    </button>
                    }
                </div>
            </mat-list-item>
            <mat-divider></mat-divider>
            }
        </mat-list>
        }

    </div>
</div>